clc;        % Clear the command window.
close all;  % Close all figures (except those of imtool.)
clear;      % Erase all existing variables.

%% Reading image in

X = imread('Ice3.jpg');
X = im2gray(X);
bw = imbinarize(X);


% Create empty mask
BW = false(size(X,1),size(X,2));

% Draw ROIs

xPos = [468.1210 467.9569 467.4679 466.6641 465.5618 464.1834 462.5570 460.7156 458.6969 456.5418 454.2943 452.0000 449.7057 447.4582 445.3031 443.2844 441.4430 439.8166 438.4382 437.3359 436.5321 436.0431 435.8790 436.0431 436.5321 437.3359 438.4382 439.8166 441.4430 443.2844 445.3031 447.4582 449.7057 452.0000 454.2943 456.5418 458.6969 460.7156 462.5570 464.1834 465.5618 466.6641 467.4679 467.9569 468.1210];
yPos = [474.9947 477.2890 479.5365 481.6916 483.7104 485.5517 487.1781 488.5565 489.6589 490.4627 490.9516 491.1157 490.9516 490.4627 489.6589 488.5565 487.1781 485.5517 483.7104 481.6916 479.5365 477.2890 474.9947 472.7005 470.4529 468.2978 466.2791 464.4377 462.8113 461.4329 460.3306 459.5268 459.0379 458.8738 459.0379 459.5268 460.3306 461.4329 462.8113 464.4377 466.2791 468.2978 470.4529 472.7005 474.9947];
m = size(BW, 1);
n = size(BW, 2);
addedRegion = poly2mask(xPos, yPos, m, n);
BW = BW | addedRegion;

% Active contour
iterations = 100;
%BW = activecontour(X, BW, iterations, 'Chan-Vese');

% Create masked image.
maskedImage = X;
maskedImage(~BW) = 0;


imshow(X)


